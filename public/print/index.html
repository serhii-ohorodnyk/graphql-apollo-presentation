<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 2.18.4"/><title data-react-helmet="true">State management</title><link as="script" rel="preload" href="/webpack-runtime-644e2f57be4c854484be.js"/><link as="script" rel="preload" href="/commons-35e76ab6f2ba2aae9560.js"/><link as="script" rel="preload" href="/app-d922f662439dbb1b52cf.js"/><link as="script" rel="preload" href="/component---gatsby-theme-mdx-deck-src-templates-deck-js-dd8d20199831c7ac1b73.js"/><link as="fetch" rel="preload" href="/page-data/print/page-data.json" crossorigin="anonymous"/></head><body><script>(function() { try {
        var mode = localStorage.getItem('theme-ui-color-mode');
        if (!mode) return
        document.body.classList.add('theme-ui-' + mode);
      } catch (e) {} })();</script><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><style data-emotion-css="13j5fvw">body{margin:0;}</style><style data-emotion-css="bdfrlc">.css-bdfrlc{width:100vw;height:100vh;}.css-bdfrlc *{box-sizing:border-box;}</style><div class="css-bdfrlc"><div style="outline:none;height:100%" tabindex="-1" role="group"><style data-emotion-css="gxvojt">.css-gxvojt{box-sizing:border-box;width:100%;height:100vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;overflow:hidden;position:relative;color:var(--theme-ui-colors-text,#9CDCFE);background-color:var(--theme-ui-colors-background,#1E1E1E);font-family:system-ui,sans-serif;font-size:20px;}@media screen and (min-width:40em){.css-gxvojt{font-size:24px;}}@media screen and (min-width:52em){.css-gxvojt{font-size:32px;}}@media screen and (min-width:64em){.css-gxvojt{font-size:48px;}}</style><div class="css-gxvojt"><style data-emotion-css="1djqpdg">.css-1djqpdg{font-family:inherit;line-height:1.125;font-weight:700;}</style><h1 class="css-1djqpdg">State management</h1><h2 class="css-1djqpdg">with Apollo &amp; GraphQL</h2></div><div class="css-gxvojt"><div style="display:flex;flex-direction:row;align-items:center;justify-content:center" class="css-0"><style data-emotion-css="wnzno2">.css-wnzno2{max-width:100%;height:auto;object-fit:cover;}</style><img style="object-fit:contain;width:30%" src="/static/react_redux-99e0859d9e4c2bfec5bb5a2061f06f35.png" class="css-wnzno2"/><span style="font-size:20rem;font-weight:bold;margin:0 50px">â†’</span><img style="object-fit:contain;width:30%" src="/static/react_apollo-1257ea88cc9b4fd7066d09ecaeb9425b.webp" class="css-wnzno2"/></div><div style="display:flex;flex-direction:row;align-items:center;justify-content:space-around;width:100%" class="css-0"><div class="css-0">React + Redux</div><div class="css-0">Apollo + React</div></div></div><div class="css-gxvojt"><h1 class="css-1djqpdg">Motivation</h1><h3 style="visibility:visible" class="css-1djqpdg">Redux is great but...</h3><h3 style="visibility:visible" class="css-1djqpdg"><div class="css-0">most of the applications need a caching layer</div><div class="css-0">and <span style="text-decoration:underline">not</span> a global state management</div></h3></div><div class="css-gxvojt"><h1 class="css-1djqpdg"></h1><h3 style="margin-bottom:0">ðŸ¤”</h3><h3 style="margin-bottom:0;margin-top:50px">But redux can work like caching layer!</h3><h3 style="margin-top:50px">Using async actions</h3></div><div class="css-gxvojt"><h3 class="css-1djqpdg">To understand the problem lets take a look at an example</h3></div><div class="css-gxvojt"><div style="width:100vw;max-width:100%;height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center" class="cs-layout"><div style="overflow:auto;height:100%;width:100%"><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><style data-emotion-css="oedec6">.css-oedec6{color:#9CDCFE;background-color:#1E1E1E;}.css-oedec6 .token-prolog{color:rgb(0,0,128);}.css-oedec6 .token-comment{color:rgb(106,153,85);}.css-oedec6 .token-builtin,.css-oedec6 .token-changed,.css-oedec6 .token-keyword{color:rgb(86,156,214);}.css-oedec6 .token-number,.css-oedec6 .token-inserted{color:rgb(181,206,168);}.css-oedec6 .token-constant{color:rgb(100,102,149);}.css-oedec6 .token-attr-name,.css-oedec6 .token-variable{color:rgb(156,220,254);}.css-oedec6 .token-deleted,.css-oedec6 .token-string,.css-oedec6 .token-attr-value{color:rgb(206,145,120);}.css-oedec6 .token-selector{color:rgb(215,186,125);}.css-oedec6 .token-tag{color:rgb(86,156,214);}.css-oedec6 .token-punctuation,.css-oedec6 .token-operator{color:rgb(212,212,212);}.css-oedec6 .token-punctuation{color:#808080;}.css-oedec6 .token-function{color:rgb(220,220,170);}.css-oedec6 .token-class-name{color:rgb(78,201,176);}.css-oedec6 .token-char{color:rgb(209,105,105);}</style><pre class="cs-content css-oedec6" style="margin:0;height:100%;overflow:hidden"><style data-emotion-css="xbe36b">.css-xbe36b{color:#9CDCFE;background-color:#1E1E1E;}</style><code class="cs-scaled-content css-xbe36b" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;opacity:1"><div style="display:inline-block" class="cs-line cs-line-0"><span class="token-keyword">const</span><span class="token-plain"> mapStateToProps </span><span class="token-operator">=</span><span class="token-plain"> </span><span class="token-punctuation">(</span><span class="token-punctuation">{</span><span class="token-plain"> makerState</span><span class="token-punctuation">:</span><span class="token-plain"> makers </span><span class="token-punctuation">}</span><span class="token-punctuation">:</span><span class="token-plain"> AppState</span><span class="token-punctuation">)</span><span class="token-punctuation">:</span><span class="token-plain"> </span><span class="token-parameter">MakerListPageStateProps</span><span class="token-plain"> </span><span class="token-operator">=&gt;</span><span class="token-plain"> </span><span class="token-punctuation">(</span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-1"><span class="token-plain"> </span><span class="token-plain"> </span><span class="token-plain">i</span><span class="token-plain">s</span><span class="token-plain">L</span><span class="token-plain">o</span><span class="token-plain">a</span><span class="token-plain">d</span><span class="token-plain">e</span><span class="token-plain">d</span><span class="token-punctuation">:</span><span class="token-plain"> </span><span class="token-plain">m</span><span class="token-plain">a</span><span class="token-plain">k</span><span class="token-plain">e</span><span class="token-plain">r</span><span class="token-plain">s</span><span class="token-punctuation">.</span><span class="token-plain">i</span><span class="token-plain">s</span><span class="token-plain">L</span><span class="token-plain">o</span><span class="token-plain">a</span><span class="token-plain">d</span><span class="token-plain">e</span><span class="token-plain">d</span><span class="token-punctuation">,</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-2"><span class="token-plain"> </span><span class="token-plain"> </span><span class="token-plain">i</span><span class="token-plain">s</span><span class="token-plain">L</span><span class="token-plain">o</span><span class="token-plain">a</span><span class="token-plain">d</span><span class="token-plain">i</span><span class="token-plain">n</span><span class="token-plain">g</span><span class="token-punctuation">:</span><span class="token-plain"> </span><span class="token-plain">m</span><span class="token-plain">a</span><span class="token-plain">k</span><span class="token-plain">e</span><span class="token-plain">r</span><span class="token-plain">s</span><span class="token-punctuation">.</span><span class="token-plain">i</span><span class="token-plain">s</span><span class="token-plain">L</span><span class="token-plain">o</span><span class="token-plain">a</span><span class="token-plain">d</span><span class="token-plain">i</span><span class="token-plain">n</span><span class="token-plain">g</span><span class="token-punctuation">,</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-3"><span class="token-plain"> </span><span class="token-plain"> </span><span class="token-plain">e</span><span class="token-plain">r</span><span class="token-plain">r</span><span class="token-plain">o</span><span class="token-plain">r</span><span class="token-punctuation">:</span><span class="token-plain"> </span><span class="token-plain">m</span><span class="token-plain">a</span><span class="token-plain">k</span><span class="token-plain">e</span><span class="token-plain">r</span><span class="token-plain">s</span><span class="token-punctuation">.</span><span class="token-plain">e</span><span class="token-plain">r</span><span class="token-plain">r</span><span class="token-plain">o</span><span class="token-plain">r</span><span class="token-punctuation">,</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-4"><span class="token-plain"> </span><span class="token-plain"> </span><span class="token-plain">m</span><span class="token-plain">a</span><span class="token-plain">k</span><span class="token-plain">e</span><span class="token-plain">r</span><span class="token-plain">s</span><span class="token-punctuation">:</span><span class="token-plain"> </span><span class="token-plain">m</span><span class="token-plain">a</span><span class="token-plain">k</span><span class="token-plain">e</span><span class="token-plain">r</span><span class="token-plain">s</span><span class="token-punctuation">.</span><span class="token-plain">d</span><span class="token-plain">a</span><span class="token-plain">t</span><span class="token-plain">a</span><span class="token-punctuation">,</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-5"><span class="token-punctuation">}</span><span class="token-punctuation">)</span><span class="token-punctuation">;</span></div></div><div style="overflow:hidden;opacity:1"><div style="display:inline-block" class="cs-line cs-line-6"><span class="token-plain">â€‹</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-7"><span class="token-keyword">const</span><span class="token-plain"> mapDispatchToProps </span><span class="token-operator">=</span><span class="token-plain"> </span><span class="token-punctuation">(</span><span class="token-plain">dispatch</span><span class="token-punctuation">:</span><span class="token-plain"> Dispatch</span><span class="token-punctuation">)</span><span class="token-punctuation">:</span><span class="token-plain"> </span><span class="token-parameter">MakerListPageDispatchProps</span><span class="token-plain"> </span><span class="token-operator">=&gt;</span><span class="token-plain"> </span><span class="token-punctuation">(</span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-8"><span class="token-plain">  </span><span class="token-function-variable">loadMakers</span><span class="token-punctuation">:</span><span class="token-plain"> </span><span class="token-punctuation">(</span><span class="token-parameter">params</span><span class="token-punctuation">:</span><span class="token-parameter"> LoadMakersRequestParams</span><span class="token-punctuation">)</span><span class="token-plain"> </span><span class="token-operator">=&gt;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-9"><span class="token-plain">    </span><span class="token-function">dispatch</span><span class="token-punctuation">(</span><span class="token-plain">GetMakerListAction</span><span class="token-punctuation">.</span><span class="token-function">create</span><span class="token-punctuation">(</span><span class="token-plain">AsyncActionStatus</span><span class="token-punctuation">.</span><span class="token-plain">Requested</span><span class="token-punctuation">,</span><span class="token-plain"> params</span><span class="token-punctuation">)</span><span class="token-punctuation">)</span><span class="token-punctuation">,</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-10"><span class="token-punctuation">}</span><span class="token-punctuation">)</span><span class="token-punctuation">;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-11"><span class="token-plain">â€‹</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-12"><span class="token-keyword">const</span><span class="token-plain"> </span><span class="token-function-variable">MakerListPageComponent</span><span class="token-plain"> </span><span class="token-operator">=</span><span class="token-plain"> </span><span class="token-punctuation">(</span><span class="token-parameter">props</span><span class="token-punctuation">:</span><span class="token-parameter"> MakerListPageProps </span><span class="token-operator">&amp;</span><span class="token-parameter"> RouteComponentProps</span><span class="token-punctuation">)</span><span class="token-plain"> </span><span class="token-operator">=&gt;</span><span class="token-plain"> </span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-13"><span class="token-plain">  </span><span class="token-keyword">const</span><span class="token-plain"> </span><span class="token-punctuation">{</span><span class="token-plain"> isValidToken </span><span class="token-punctuation">}</span><span class="token-plain"> </span><span class="token-operator">=</span><span class="token-plain"> </span><span class="token-function">useAuthentication</span><span class="token-punctuation">(</span><span class="token-punctuation">)</span><span class="token-punctuation">;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-14"><span class="token-plain">  </span><span class="token-keyword">const</span><span class="token-plain"> countryCode </span><span class="token-operator">=</span><span class="token-plain"> </span><span class="token-function">useSelector</span><span class="token-punctuation">(</span><span class="token-plain">getCurrentCountryCode</span><span class="token-punctuation">)</span><span class="token-punctuation">;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-15"><span class="token-plain">  </span><span class="token-comment">// Load all makers</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-16"><span class="token-plain">  React</span><span class="token-punctuation">.</span><span class="token-function">useEffect</span><span class="token-punctuation">(</span><span class="token-punctuation">(</span><span class="token-punctuation">)</span><span class="token-plain"> </span><span class="token-operator">=&gt;</span><span class="token-plain"> </span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-17"><span class="token-plain">    </span><span class="token-keyword">if</span><span class="token-plain"> </span><span class="token-punctuation">(</span><span class="token-plain">isValidToken</span><span class="token-punctuation">)</span><span class="token-plain"> </span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-18"><span class="token-plain">      </span><span class="token-comment">// if user is logged-in, makers will be loaded automatically</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-19"><span class="token-plain">      </span><span class="token-comment">// using RetailerContext</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-20"><span class="token-plain">      </span><span class="token-keyword">return</span><span class="token-punctuation">;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-21"><span class="token-plain">    </span><span class="token-punctuation">}</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-22"><span class="token-plain">â€‹</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-23"><span class="token-plain"> </span><span class="token-plain"> </span><span class="token-plain"> </span><span class="token-plain"> </span><span class="token-keyword">i</span><span class="token-keyword">f</span><span class="token-plain"> </span><span class="token-punctuation">(</span><span class="token-operator">!</span><span class="token-plain">p</span><span class="token-plain">r</span><span class="token-plain">o</span><span class="token-plain">p</span><span class="token-plain">s</span><span class="token-punctuation">.</span><span class="token-plain">i</span><span class="token-plain">s</span><span class="token-plain">L</span><span class="token-plain">o</span><span class="token-plain">a</span><span class="token-plain">d</span><span class="token-plain">i</span><span class="token-plain">n</span><span class="token-plain">g</span><span class="token-plain"> </span><span class="token-operator">&amp;</span><span class="token-operator">&amp;</span><span class="token-plain"> </span><span class="token-operator">!</span><span class="token-plain">p</span><span class="token-plain">r</span><span class="token-plain">o</span><span class="token-plain">p</span><span class="token-plain">s</span><span class="token-punctuation">.</span><span class="token-plain">i</span><span class="token-plain">s</span><span class="token-plain">L</span><span class="token-plain">o</span><span class="token-plain">a</span><span class="token-plain">d</span><span class="token-plain">e</span><span class="token-plain">d</span><span class="token-plain"> </span><span class="token-operator">&amp;</span><span class="token-operator">&amp;</span><span class="token-plain"> </span><span class="token-operator">!</span><span class="token-operator">!</span><span class="token-plain">c</span><span class="token-plain">o</span><span class="token-plain">u</span><span class="token-plain">n</span><span class="token-plain">t</span><span class="token-plain">r</span><span class="token-plain">y</span><span class="token-plain">C</span><span class="token-plain">o</span><span class="token-plain">d</span><span class="token-plain">e</span><span class="token-punctuation">)</span><span class="token-plain"> </span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-24"><span class="token-plain">      </span><span class="token-keyword">return</span><span class="token-plain"> props</span><span class="token-punctuation">.</span><span class="token-function">loadMakers</span><span class="token-punctuation">(</span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-25"><span class="token-plain">        countryCode</span><span class="token-punctuation">,</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-26"><span class="token-plain">        skip</span><span class="token-punctuation">:</span><span class="token-plain"> </span><span class="token-number">0</span><span class="token-punctuation">,</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-27"><span class="token-plain">        limit</span><span class="token-punctuation">:</span><span class="token-plain"> Number</span><span class="token-punctuation">.</span><span class="token-constant">MAX_SAFE_INTEGER</span><span class="token-punctuation">,</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-28"><span class="token-plain">      </span><span class="token-punctuation">}</span><span class="token-punctuation">)</span><span class="token-punctuation">;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-29"><span class="token-plain">    </span><span class="token-punctuation">}</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-30"><span class="token-plain">  </span><span class="token-punctuation">}</span><span class="token-punctuation">,</span><span class="token-plain"> </span><span class="token-punctuation">[</span><span class="token-plain">props</span><span class="token-punctuation">.</span><span class="token-plain">location</span><span class="token-punctuation">,</span><span class="token-plain"> props</span><span class="token-punctuation">.</span><span class="token-plain">isLoading</span><span class="token-punctuation">,</span><span class="token-plain"> props</span><span class="token-punctuation">.</span><span class="token-plain">isLoaded</span><span class="token-punctuation">,</span><span class="token-plain"> countryCode</span><span class="token-punctuation">]</span><span class="token-punctuation">)</span><span class="token-punctuation">;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-31"><span class="token-plain">â€‹</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-32"><span class="token-plain">  </span><span class="token-keyword">return</span><span class="token-plain"> </span><span class="token-punctuation">(</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-33"><span class="token-plain">      </span><span class="token-punctuation">&lt;</span><span class="token-class-name">MakerListPage</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-34"><span class="token-tag">        </span><span class="token-punctuation">{</span><span class="token-punctuation">...</span><span class="token-attr-value">props</span><span class="token-punctuation">}</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-35"><span class="token-tag">        </span><span class="token-attr-name">makers</span><span class="token-script-punctuation">=</span><span class="token-punctuation">{</span><span class="token-function">getMakersToDisplay</span><span class="token-punctuation">(</span><span class="token-punctuation">)</span><span class="token-punctuation">}</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-36"><span class="token-tag">      </span><span class="token-punctuation">/&gt;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-37"><span class="token-plain">  </span><span class="token-punctuation">)</span><span class="token-punctuation">;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-38"><span class="token-punctuation">}</span><span class="token-punctuation">;</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-39"><span class="token-plain">â€‹</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-40"><span class="token-keyword">export</span><span class="token-plain"> </span><span class="token-keyword">default</span><span class="token-plain"> </span><span class="token-function">connect</span><span class="token-punctuation">(</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-41"><span class="token-plain">  mapStateToProps</span><span class="token-punctuation">,</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-42"><span class="token-plain">  mapDispatchToProps</span></div></div><div style="overflow:hidden;height:100px;opacity:1;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-43"><span class="token-punctuation">)</span><span class="token-punctuation">(</span><span class="token-plain">MakerListPageComponent</span><span class="token-punctuation">)</span><span class="token-punctuation">;</span></div></div><div></div></code></pre><style data-emotion-css="fs2d1k">.css-fs2d1k{position:absolute;bottom:0;width:calc(100% - 2em);box-sizing:border-box;margin:0.3em 1em;padding:0.5em;background:rgba(2,2,2,0.9);text-align:center;color:#d6deeb;background-color:rgba(10,10,10,0.9);}</style><p class="cs-subtitle css-fs2d1k"><span style="opacity:1">Maker list page component</span></p></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-oedec6" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-xbe36b" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;opacity:0.3"><div style="display:inline-block" class="cs-line cs-line-0"><span class="token-keyword">const</span><span class="token-plain"> mapStateToProps </span><span class="token-operator">=</span><span class="token-plain"> </span><span class="token-punctuation">(</span><span class="token-punctuation">{</span><span class="token-plain"> makerState</span><span class="token-punctuation">:</span><span class="token-plain"> makers </span><span class="token-punctuation">}</span><span class="token-punctuation">:</span><span class="token-plain"> AppState</span><span class="token-punctuation">)</span><span class="token-punctuation">:</span><span class="token-plain"> </span><span class="token-parameter">MakerListPageStateProps</span><span class="token-plain"> </span><span class="token-operator">=&gt;</span><span class="token-plain"> </span><span class="token-punctuation">(</span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;opacity:0.3"><div style="display:inline-block" class="cs-line cs-line-6"><span class="token-plain">â€‹</span></div></div><div></div></code></pre><p class="cs-subtitle css-fs2d1k"><span style="opacity:1">Conencting to redux store</span></p></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-oedec6" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-xbe36b" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;opacity:0.3"><div style="display:inline-block" class="cs-line cs-line-0"><span class="token-keyword">const</span><span class="token-plain"> mapStateToProps </span><span class="token-operator">=</span><span class="token-plain"> </span><span class="token-punctuation">(</span><span class="token-punctuation">{</span><span class="token-plain"> makerState</span><span class="token-punctuation">:</span><span class="token-plain"> makers </span><span class="token-punctuation">}</span><span class="token-punctuation">:</span><span class="token-plain"> AppState</span><span class="token-punctuation">)</span><span class="token-punctuation">:</span><span class="token-plain"> </span><span class="token-parameter">MakerListPageStateProps</span><span class="token-plain"> </span><span class="token-operator">=&gt;</span><span class="token-plain"> </span><span class="token-punctuation">(</span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;opacity:0.3"><div style="display:inline-block" class="cs-line cs-line-6"><span class="token-plain">â€‹</span></div></div><div></div></code></pre><p class="cs-subtitle css-fs2d1k"><span style="opacity:1">Refetch data based on dependencies</span></p></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-oedec6" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-xbe36b" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;opacity:0.3"><div style="display:inline-block" class="cs-line cs-line-0"><span class="token-keyword">const</span><span class="token-plain"> mapStateToProps </span><span class="token-operator">=</span><span class="token-plain"> </span><span class="token-punctuation">(</span><span class="token-punctuation">{</span><span class="token-plain"> makerState</span><span class="token-punctuation">:</span><span class="token-plain"> makers </span><span class="token-punctuation">}</span><span class="token-punctuation">:</span><span class="token-plain"> AppState</span><span class="token-punctuation">)</span><span class="token-punctuation">:</span><span class="token-plain"> </span><span class="token-parameter">MakerListPageStateProps</span><span class="token-plain"> </span><span class="token-operator">=&gt;</span><span class="token-plain"> </span><span class="token-punctuation">(</span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;opacity:0.3"><div style="display:inline-block" class="cs-line cs-line-6"><span class="token-plain">â€‹</span></div></div><div></div></code></pre><p class="cs-subtitle css-fs2d1k"><span style="opacity:1">Use cached data if it is loaded already</span></p></div></div><div style="overflow:auto;height:100%;width:100%"><div class="cs-container" style="width:100%;height:100%;max-height:100%;position:relative"><pre class="cs-content css-oedec6" style="margin:0;height:100%;overflow:hidden"><code class="cs-scaled-content css-xbe36b" style="display:block;height:100%;transform:scale(1);transform-origin:center 0px"><div></div><div style="overflow:hidden;height:100px;opacity:0.3;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-0"><span class="token-keyword">const</span><span class="token-plain"> mapStateToProps </span><span class="token-operator">=</span><span class="token-plain"> </span><span class="token-punctuation">(</span><span class="token-punctuation">{</span><span class="token-plain"> makerState</span><span class="token-punctuation">:</span><span class="token-plain"> makers </span><span class="token-punctuation">}</span><span class="token-punctuation">:</span><span class="token-plain"> AppState</span><span class="token-punctuation">)</span><span class="token-punctuation">:</span><span class="token-plain"> </span><span class="token-parameter">MakerListPageStateProps</span><span class="token-plain"> </span><span class="token-operator">=&gt;</span><span class="token-plain"> </span><span class="token-punctuation">(</span><span class="token-punctuation">{</span></div></div><div style="overflow:hidden;height:100px;opacity:0.3;transform:translateX(0px)"><div style="display:inline-block" class="cs-line cs-line-6"><span class="token-plain">â€‹</span></div></div><div></div></code></pre><p class="cs-subtitle css-fs2d1k" style="opacity:1"><span style="opacity:1">Retrigger funciton if dependencies change</span></p></div></div></div></div></div><div class="css-gxvojt"><h2 class="css-1djqpdg">Seems simple. Right?</h2><h2 style="visibility:visible" class="css-1djqpdg">Except it&#x27;s not all...</h2></div><div class="css-gxvojt"><div style="max-width:70%"><h2 class="css-1djqpdg">What if dependency value changes outside of MakerListPage?</h2><h3 style="visibility:visible" class="css-1djqpdg">- We refetch list data after dependency changes (we have thunk)</h3></div></div><div class="css-gxvojt"><h2 class="css-1djqpdg">TBD: Diagramm with dependencies</h2></div><div class="css-gxvojt"><div style="max-width:70%"><h3 class="css-1djqpdg">Code becames difficult to reason about</h3><style data-emotion-css="1uk1gs8">.css-1uk1gs8{margin:0;}</style><ul class="css-1uk1gs8"><li style="visibility:visible" class="css-0">actions (or context) starts to fetch data that they don&#x27;t know about</li><li style="visibility:visible" class="css-0">it becomes easy to overfetch data or get stale data</li><li style="visibility:visible" class="css-0">difficult to refactor and decouple code</li></ul></div></div><div class="css-gxvojt"><div style="max-width:70%"><h3 class="css-1djqpdg">It happens because we are not fetching data in a reactive way (declarative)</h3></div></div><div class="css-gxvojt"><div style="max-width:70%"><h3 class="css-1djqpdg">It can be declarative with redux</h3><ul class="css-1uk1gs8"><li style="visibility:visible" class="css-0">Save data in redux store with request parameters as a key</li><li style="visibility:visible" class="css-0">Use smart selectors (hooks) to get data from store based on request parameters or trigger the request action</li><li style="visibility:visible" class="css-0">Normalize the data (dictionary of items separate, array of item Ids separate)</li></ul></div></div><div class="css-gxvojt"><h2 class="css-1djqpdg">With apollo we get this caching for free</h2><h3 class="css-1djqpdg">It is a graphql client with smart cache</h3><h3 class="css-1djqpdg">not a storage</h3></div><div class="css-gxvojt"><img src="/static/Apollo-vs-redux-99e5c0738c195093b7df1aa2e7b13a4a.jpg" style="height:100%" class="css-wnzno2"/></div><div class="css-gxvojt"><h2 class="css-1djqpdg">Graphql core definitions</h2><div style="max-width:70%"><ul class="css-1uk1gs8"><li style="visibility:visible" class="css-0">GraphQL - a query language for your API</li><li style="visibility:visible" class="css-0">Schema - description of available objects and its fields</li><li style="visibility:visible" class="css-0">Resolver - function that describes how to resolve field of an object in a Schema</li><li style="visibility:visible" class="css-0">Operation(query or mutation) - request of specific fields on objects</li></ul></div></div><div class="css-gxvojt"><h2 class="css-1djqpdg">TBD: Example with graphql</h2></div><div class="css-gxvojt"><h2 class="css-1djqpdg">References</h2><div class="sc-bdVaJa bRlCia"><div class="sc-htpNat cFwtcj"><div><a href="https://graphql.org/learn/" target="_blank" class="sc-bwzfXH hLfIbV">GraphQL docs</a></div></div><div class="sc-htpNat cFwtcj"><div><a href="https://www.apollographql.com/docs/react/" target="_blank" class="sc-bwzfXH hLfIbV">Apollo docs</a></div></div><div class="sc-htpNat cFwtcj"><div><a href="https://graphql-code-generator.com/docs/getting-started/" target="_blank" class="sc-bwzfXH hLfIbV">Code generator docs</a></div></div></div></div><div class="css-gxvojt"></div></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/print";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-d922f662439dbb1b52cf.js"],"component---gatsby-theme-mdx-deck-src-templates-deck-js":["/component---gatsby-theme-mdx-deck-src-templates-deck-js-dd8d20199831c7ac1b73.js"]};/*]]>*/</script><script src="/component---gatsby-theme-mdx-deck-src-templates-deck-js-dd8d20199831c7ac1b73.js" async=""></script><script src="/app-d922f662439dbb1b52cf.js" async=""></script><script src="/commons-35e76ab6f2ba2aae9560.js" async=""></script><script src="/webpack-runtime-644e2f57be4c854484be.js" async=""></script></body></html>